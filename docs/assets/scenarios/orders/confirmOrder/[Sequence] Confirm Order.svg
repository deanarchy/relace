<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="573px" preserveAspectRatio="none" style="width:959px;height:573px;background:#FFFFFF;" version="1.1" viewBox="0 0 959 573" width="959px" zoomAndPan="magnify"><defs><filter height="300%" id="f17x5ngftl5dp7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="561.9999" style="stroke:#A80036;stroke-width:1.0;" width="438" x="330.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="87" x="506" y="18.077">Order Domain</text><rect fill="#FFFFFF" filter="url(#f17x5ngftl5dp7)" height="358.4001" style="stroke:#000000;stroke-width:2.0;" width="935.5" x="10" y="105.7999"/><rect fill="#FFFFFF" height="163.2" style="stroke:none;stroke-width:1.0;" width="935.5" x="10" y="301"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="71" x2="71" y1="88.7999" y2="481.2"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="191.5" x2="191.5" y1="88.7999" y2="481.2"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="433.5" x2="433.5" y1="88.7999" y2="481.2"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="706.5" x2="706.5" y1="88.7999" y2="481.2"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="810.5" x2="810.5" y1="88.7999" y2="481.2"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="896.5" x2="896.5" y1="88.7999" y2="481.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="20" y="85.0059">User (Provider)</text><ellipse cx="71.5" cy="15" fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M71.5,23 L71.5,50 M58.5,31 L84.5,31 M71.5,50 L58.5,65 M71.5,50 L84.5,65 " fill="none" filter="url(#f17x5ngftl5dp7)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="20" y="493.2059">User (Provider)</text><ellipse cx="71.5" cy="506.9999" fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M71.5,514.9999 L71.5,541.9999 M58.5,522.9999 L84.5,522.9999 M71.5,541.9999 L58.5,556.9999 M71.5,541.9999 L84.5,556.9999 " fill="none" filter="url(#f17x5ngftl5dp7)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="50" x="164.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="171.5" y="73.0059">Client</text><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="50" x="164.5" y="480.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="171.5" y="500.2059">Client</text><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="194" x="334.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="341.5" y="73.0059">OrderConfirmationController</text><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="194" x="334.5" y="480.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="341.5" y="500.2059">OrderConfirmationController</text><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="112" x="648.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="655.5" y="73.0059">OrderDatabase</text><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="112" x="648.5" y="480.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="655.5" y="500.2059">OrderDatabase</text><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="65" x="778.5" y="49"/><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="65" x="774.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="781.5" y="73.0059">Account</text><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="65" x="778.5" y="480.2"/><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="65" x="774.5" y="484.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="781.5" y="504.2059">Account</text><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="70" x="861.5" y="49"/><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="70" x="857.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="864.5" y="73.0059">Payment</text><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="70" x="861.5" y="480.2"/><rect fill="#FEFECE" filter="url(#f17x5ngftl5dp7)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="70" x="857.5" y="484.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="864.5" y="504.2059">Payment</text><path d="M10,105.7999 L70,105.7999 L70,112.7999 L60,122.7999 L10,122.7999 L10,105.7999 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="358.4001" style="stroke:#000000;stroke-width:2.0;" width="935.5" x="10" y="105.7999"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15" x="25" y="118.8769">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="74" x="85" y="118.0189">[accept order]</text><polygon fill="#A80036" points="179.5,141,189.5,145,179.5,149,183.5,145" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="71.5" x2="185.5" y1="145" y2="145"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="78.5" y="139.477">Accept the order</text><polygon fill="#A80036" points="421.5,170.6,431.5,174.6,421.5,178.6,425.5,174.6" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="191.5" x2="427.5" y1="174.6" y2="174.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="198.5" y="169.077">PUT /api/orders/{order.id}/request</text><polygon fill="#A80036" points="694.5,200.2,704.5,204.2,694.5,208.2,698.5,204.2" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="433.5" x2="700.5" y1="204.2" y2="204.2"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="440.5" y="198.677">Write order data (status: AwaitingPayment)</text><polygon fill="#A80036" points="799,229.8,809,233.8,799,237.8,803,233.8" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="433.5" x2="805" y1="233.8" y2="233.8"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="440.5" y="228.277">&lt;&lt; Event OrderAccepted &gt;&gt;</text><polygon fill="#A80036" points="884.5,259.4,894.5,263.4,884.5,267.4,888.5,263.4" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="433.5" x2="890.5" y1="263.4" y2="263.4"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="440.5" y="257.877">&lt;&lt; Event OrderAccepted &gt;&gt;</text><polygon fill="#A80036" points="202.5,289,192.5,293,202.5,297,198.5,293" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="196.5" x2="432.5" y1="293" y2="293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="208.5" y="287.477">200 OK Resource Updated</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="945.5" y1="302" y2="302"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="68" x="15" y="312.2189">[reject order]</text><polygon fill="#A80036" points="179.5,333.7999,189.5,337.7999,179.5,341.7999,183.5,337.7999" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="71.5" x2="185.5" y1="337.7999" y2="337.7999"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="78.5" y="332.2769">Reject the order</text><polygon fill="#A80036" points="421.5,363.4,431.5,367.4,421.5,371.4,425.5,367.4" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="191.5" x2="427.5" y1="367.4" y2="367.4"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="198.5" y="361.8769">DELETE /api/orders/{order.id}/request</text><polygon fill="#A80036" points="694.5,393,704.5,397,694.5,401,698.5,397" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="433.5" x2="700.5" y1="397" y2="397"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="440.5" y="391.477">Write order data (status: Cancelled)</text><polygon fill="#A80036" points="799,422.6,809,426.6,799,430.6,803,426.6" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="433.5" x2="805" y1="426.6" y2="426.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="440.5" y="421.077">&lt;&lt; Event OrderCancelled &gt;&gt;</text><polygon fill="#A80036" points="202.5,452.2,192.5,456.2,202.5,460.2,198.5,456.2" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="196.5" x2="432.5" y1="456.2" y2="456.2"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="208.5" y="450.677">200 OK Resource Updated</text><!--MD5=[aa79e6382153b1c3445464daa9643359]
@startuml [Sequence] Confirm Order


actor "User (Provider)" as User
participant Client as Client

box "Order Domain"
participant OrderConfirmationController
participant OrderDatabase
end box

collections Account as Account
collections Payment as Payment

alt accept order
    User -> Client: Accept the order
    Client -> OrderConfirmationController: PUT /api/orders/{order.id}/request
    OrderConfirmationController -> OrderDatabase: Write order data (status: AwaitingPayment)
    OrderConfirmationController - - -> Account: << Event OrderAccepted >>
    OrderConfirmationController - - -> Payment: << Event OrderAccepted >>
    OrderConfirmationController - -> Client: 200 OK Resource Updated

else reject order
    User -> Client: Reject the order
    Client -> OrderConfirmationController: DELETE /api/orders/{order.id}/request
    OrderConfirmationController -> OrderDatabase: Write order data (status: Cancelled)
    OrderConfirmationController - - -> Account: << Event OrderCancelled >>
    OrderConfirmationController - -> Client: 200 OK Resource Updated

end

@enduml

PlantUML version 1.2021.7(Sun May 23 19:40:07 WIB 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>